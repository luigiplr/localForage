/*!
    localForage -- Offline Storage, Improved
    Version 1.7.1
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
!function(a,b){if("function"==typeof define&&define.amd)define("localforage",["exports","./utils/isIndexedDBValid","./utils/isWebSQLValid","./utils/isLocalStorageValid","./drivers/indexeddb","./drivers/websql","./drivers/localstorage","./utils/serializer","./utils/promise","./utils/executeTwoCallbacks"],b);else if("undefined"!=typeof exports)b(exports,require("./utils/isIndexedDBValid"),require("./utils/isWebSQLValid"),require("./utils/isLocalStorageValid"),require("./drivers/indexeddb"),require("./drivers/websql"),require("./drivers/localstorage"),require("./utils/serializer"),require("./utils/promise"),require("./utils/executeTwoCallbacks"));else{var c={exports:{}};b(c.exports,a.isIndexedDBValid,a.isWebSQLValid,a.isLocalStorageValid,a.indexeddb,a.websql,a.localstorage,a.serializer,a.promise,a.executeTwoCallbacks),a.localforage=c.exports}}(this,function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(a){return a&&a.__esModule?a:{default:a}}function l(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function m(a,b){a[b]=function(){var c=arguments;return a.ready().then(function(){return a[b].apply(a,c)})}}function n(){for(var a=1;a<arguments.length;a++){var b=arguments[a];if(b)for(var c in b)b.hasOwnProperty(c)&&(F(b[c])?arguments[0][c]=b[c].slice():arguments[0][c]=b[c])}return arguments[0]}function o(a){for(var b in A)if(A.hasOwnProperty(b)&&A[b]===a)return!0;return!1}Object.defineProperty(a,"__esModule",{value:!0}),a.LocalForage=void 0;var p=k(b),q=k(c),r=k(d),s=k(e),t=k(f),u=k(g),v=k(h),w=k(i),x=k(j),y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},z={},A={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},B=[A.INDEXEDDB,A.WEBSQL,A.LOCALSTORAGE],C=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],D={description:"",driver:B.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},E={};E[A.INDEXEDDB]=(0,p.default)(),E[A.WEBSQL]=(0,q.default)(),E[A.LOCALSTORAGE]=(0,r.default)();var F=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},G=a.LocalForage=function(){function a(b){l(this,a),this.INDEXEDDB=A.INDEXEDDB,this.LOCALSTORAGE=A.LOCALSTORAGE,this.WEBSQL=A.WEBSQL,this._defaultConfig=n({},D),this._config=n({},this._defaultConfig,b),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return a.prototype.config=function(a){if("object"===(void 0===a?"undefined":y(a))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var b in a){if("storeName"===b&&(a[b]=a[b].replace(/\W/g,"_")),"version"===b&&"number"!=typeof a[b])return new Error("Database version must be a number.");this._config[b]=a[b]}return!("driver"in a&&a.driver)||this.setDriver(this._config.driver)}return"string"==typeof a?this._config[a]:this._config},a.prototype.defineDriver=function(a,b,c){var d=new w.default(function(b,c){try{var d=a._driver,e=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),f=new Error("Custom driver name already in use: "+a._driver);if(!a._driver)return void c(e);if(o(a._driver))return void c(f);for(var g=C.concat("_initStorage"),h=0;h<g.length;h++){var i=g[h];if(!i||!a[i]||"function"!=typeof a[i])return void c(e)}var j=function(c){E[d]=c,z[d]=a,b()};"_support"in a?a._support&&"function"==typeof a._support?a._support().then(j,c):j(!!a._support):j(!0)}catch(a){c(a)}});return(0,x.default)(d,b,c),d},a.prototype.driver=function(){return this._driver||null},a.prototype.getDriver=function(a,b,c){var d=this,e=w.default.resolve().then(function(){if(!o(a)){if(z[a])return z[a];throw new Error("Driver not found.")}switch(a){case d.INDEXEDDB:return s.default;case d.LOCALSTORAGE:return u.default;case d.WEBSQL:return t.default}});return(0,x.default)(e,b,c),e},a.prototype.getSerializer=function(a){var b=w.default.resolve(v.default);return(0,x.default)(b,a),b},a.prototype.ready=function(a){var b=this,c=b._driverSet.then(function(){return null===b._ready&&(b._ready=b._initDriver()),b._ready});return(0,x.default)(c,a,a),c},a.prototype.setDriver=function(a,b,c){function d(){g._config.driver=g.driver()}function e(a){return g._extend(a),d(),g._ready=g._initStorage(g._config),g._ready}function f(a){return function(){function b(){for(;c<a.length;){var f=a[c];return c++,g._dbInfo=null,g._ready=null,g.getDriver(f).then(e).catch(b)}d();var h=new Error("No available storage method found.");return g._driverSet=w.default.reject(h),g._driverSet}var c=0;return b()}}var g=this;F(a)||(a=[a]);var h=this._getSupportedDrivers(a),i=null!==this._driverSet?this._driverSet.catch(function(){return w.default.resolve()}):w.default.resolve();return this._driverSet=i.then(function(){var a=h[0];return g._dbInfo=null,g._ready=null,g.getDriver(a).then(function(a){g._driver=a._driver,d(),g._wrapLibraryMethodsWithReady(),g._initDriver=f(h)})}).catch(function(){d();var a=new Error("No available storage method found.");return g._driverSet=w.default.reject(a),g._driverSet}),(0,x.default)(this._driverSet,b,c),this._driverSet},a.prototype.supports=function(a){return!!E[a]},a.prototype._extend=function(a){n(this,a)},a.prototype._getSupportedDrivers=function(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];this.supports(e)&&b.push(e)}return b},a.prototype._wrapLibraryMethodsWithReady=function(){for(var a=0;a<C.length;a++)m(this,C[a])},a.prototype.createInstance=function(b){return new a(b)},a}();a.default=new G});